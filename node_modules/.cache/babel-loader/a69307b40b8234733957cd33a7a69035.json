{"ast":null,"code":"var _jsxFileName = \"E:\\\\React JS\\\\First Practice\\\\contacts\\\\src\\\\components\\\\Contacts\\\\EditContact.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useContext } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport { ContactContext } from \"../../context/contactContext\";\nimport { getContact, updateContact } from \"../../services/contactService\";\nimport { Spinner } from \"../\";\nimport { COMMENT, ORANGE, PURPLE } from \"../../helpers/colors\";\nimport { Formik, Form, Field, ErrorMessage } from \"formik\";\nimport { contactSchema } from \"../../validations/contactValidation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EditContact = () => {\n  _s();\n\n  const {\n    contactId\n  } = useParams();\n  const {\n    contacts,\n    setContacts,\n    setFilteredContacts,\n    loading,\n    setLoading,\n    groups\n  } = useContext(ContactContext);\n  const navigate = useNavigate();\n  const [contact, setContact] = useState({});\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const {\n          data: contactData\n        } = await getContact(contactId);\n        setLoading(false);\n        setContact(contactData);\n      } catch (err) {\n        console.log(err);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const onContactChange = event => {\n    setContact({ ...contact,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const submitForm = async event => {\n    event.preventDefault();\n\n    try {\n      setLoading(true); // Copy State\n      // Update State\n      // Send Request\n      // status == 200 -> do nothing\n      // status == error -> setState(copyState)\n\n      const {\n        data,\n        status\n      } = await updateContact(contact, contactId);\n      /*\n       * NOTE\n       * 1- forceRender -> setForceRender(true)\n       * 2- Send request server\n       * 3- Update local state\n       * 4- Update local state before sending request to server\n       */\n\n      if (status === 200) {\n        setLoading(false);\n        const allContacts = [...contacts];\n        const contactIndex = allContacts.findIndex(c => c.id === parseInt(contactId));\n        allContacts[contactIndex] = { ...data\n        };\n        setContacts(allContacts);\n        setFilteredContacts(allContacts);\n        navigate(\"/contacts\");\n      }\n    } catch (err) {\n      console.log(err);\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row my-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"h4 fw-bold\",\n                style: {\n                  color: ORANGE\n                },\n                children: \"\\u0648\\u06CC\\u0631\\u0627\\u06CC\\u0634 \\u0645\\u062E\\u0627\\u0637\\u0628\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n            style: {\n              backgroundColor: ORANGE\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row p-2 w-75 mx-auto align-items-center\",\n            style: {\n              backgroundColor: \"#44475a\",\n              borderRadius: \"1em\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-8\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: contact.photo,\n                className: \"img-fluid rounded\",\n                style: {\n                  border: `1px solid ${PURPLE}`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mt-1\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: require(\"../../assets/man-taking-note.png\"),\n            height: \"300px\",\n            style: {\n              opacity: \"60%\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n};\n\n_s(EditContact, \"0bFiTzec0wpGj3Gvtuc+RT5xy+M=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = EditContact;\nexport default EditContact;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditContact\");","map":{"version":3,"names":["useEffect","useState","useContext","Link","useNavigate","useParams","ContactContext","getContact","updateContact","Spinner","COMMENT","ORANGE","PURPLE","Formik","Form","Field","ErrorMessage","contactSchema","EditContact","contactId","contacts","setContacts","setFilteredContacts","loading","setLoading","groups","navigate","contact","setContact","fetchData","data","contactData","err","console","log","onContactChange","event","target","name","value","submitForm","preventDefault","status","allContacts","contactIndex","findIndex","c","id","parseInt","color","backgroundColor","borderRadius","photo","border","require","opacity"],"sources":["E:/React JS/First Practice/contacts/src/components/Contacts/EditContact.jsx"],"sourcesContent":["import { useEffect, useState, useContext } from \"react\";\n\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\n\nimport { ContactContext } from \"../../context/contactContext\";\nimport { getContact, updateContact } from \"../../services/contactService\";\nimport { Spinner } from \"../\";\nimport { COMMENT, ORANGE, PURPLE } from \"../../helpers/colors\";\n\nimport { Formik , Form , Field , ErrorMessage } from \"formik\";\nimport { contactSchema } from \"../../validations/contactValidation\";\n\nconst EditContact = () => {\n  const { contactId } = useParams();\n  const {\n    contacts,\n    setContacts,\n    setFilteredContacts,\n    loading,\n    setLoading,\n    groups,\n  } = useContext(ContactContext);\n\n  const navigate = useNavigate();\n\n  const [contact, setContact] = useState({});\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const { data: contactData } = await getContact(contactId);\n\n        setLoading(false);\n        setContact(contactData);\n      } catch (err) {\n        console.log(err);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const onContactChange = (event) => {\n    setContact({\n      ...contact,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const submitForm = async (event) => {\n    event.preventDefault();\n    try {\n      setLoading(true);\n      // Copy State\n      // Update State\n      // Send Request\n      // status == 200 -> do nothing\n      // status == error -> setState(copyState)\n      const { data, status } = await updateContact(contact, contactId);\n\n      /*\n       * NOTE\n       * 1- forceRender -> setForceRender(true)\n       * 2- Send request server\n       * 3- Update local state\n       * 4- Update local state before sending request to server\n       */\n\n      if (status === 200) {\n        setLoading(false);\n\n        const allContacts = [...contacts];\n        const contactIndex = allContacts.findIndex(\n          (c) => c.id === parseInt(contactId)\n        );\n        allContacts[contactIndex] = { ...data };\n\n        setContacts(allContacts);\n        setFilteredContacts(allContacts);\n\n        navigate(\"/contacts\");\n      }\n    } catch (err) {\n      console.log(err);\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      {loading ? (\n        <Spinner />\n      ) : (\n        <>\n          <section className=\"p-3\">\n            <div className=\"container\">\n              <div className=\"row my-2\">\n                <div className=\"col text-center\">\n                  <p className=\"h4 fw-bold\" style={{ color: ORANGE }}>\n                    ویرایش مخاطب\n                  </p>\n                </div>\n              </div>\n              <hr style={{ backgroundColor: ORANGE }} />\n              <div\n                className=\"row p-2 w-75 mx-auto align-items-center\"\n                style={{ backgroundColor: \"#44475a\", borderRadius: \"1em\" }}\n              >\n                <div className=\"col-md-8\">\n                  \n                </div>\n                <div className=\"col-md-4\">\n                  <img\n                    src={contact.photo}\n                    className=\"img-fluid rounded\"\n                    style={{ border: `1px solid ${PURPLE}` }}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"text-center mt-1\">\n              <img\n                src={require(\"../../assets/man-taking-note.png\")}\n                height=\"300px\"\n                style={{ opacity: \"60%\" }}\n              />\n            </div>\n          </section>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default EditContact;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}